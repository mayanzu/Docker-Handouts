<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¬¬16è¯¾æ—¶ - K8så®æˆ˜ä¸è¯¾ç¨‹æ€»ç»“</title>
  <link rel="stylesheet" href="../lecture-assets/css/lecture-template.css">
</head>
<body>
  <div class="lecture-page">
    <div class="page-container" id="pageContainer">

<div class="page cover-page">
        <div class="cover-content">
          <div class="course-badge">è¯¾ç¨‹æ”¶å®˜</div>
          <h1 class="main-title">ç¬¬16è¯¾æ—¶</h1>
          <h2 class="sub-title">K8så®æˆ˜ä¸è¯¾ç¨‹æ€»ç»“</h2>
          <p class="tagline">ä»å…¥é—¨åˆ°ç²¾é€šçš„æœ€åä¸€å…¬é‡Œ</p>
          <div class="meta-info">
            <span>ğŸ“š 90åˆ†é’Ÿ</span>
            <span>ğŸ¯ ç†è®º+å®æ“</span>
            <span>ğŸ“Š è¿›é˜¶çº§</span>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">è¯¾ç¨‹ç›®æ ‡</h2>
        <div class="objective-list">
          <div class="objective-item">
            <span class="objective-num">01</span>
            <div class="objective-content">
              <h3>æŒæ¡é…ç½®ç®¡ç†</h3>
              <p>å­¦ä¼šConfigMapå’ŒSecretçš„ä½¿ç”¨ï¼Œå®ç°é…ç½®ä¸é•œåƒè§£è€¦</p>
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-num">02</span>
            <div class="objective-content">
              <h3>ç†è§£æŒä¹…åŒ–å­˜å‚¨</h3>
              <p>æŒæ¡PV/PVCæœºåˆ¶ï¼Œå®ç°æ•°æ®æŒä¹…åŒ–ä¸å­˜å‚¨ç®¡ç†</p>
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-num">03</span>
            <div class="objective-content">
              <h3>äº†è§£Helmå·¥å…·</h3>
              <p>å­¦ä¼šä½¿ç”¨Helmè¿›è¡Œå¤æ‚åº”ç”¨çš„ä¸€é”®éƒ¨ç½²</p>
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-num">04</span>
            <div class="objective-content">
              <h3>å®Œæˆç»¼åˆå®æˆ˜</h3>
              <p>ç‹¬ç«‹å®ŒæˆSpringBoot+MySQLå…¨æ ˆåº”ç”¨çš„K8séƒ¨ç½²</p>
            </div>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">è¯¾ç¨‹å®‰æ’</h2>
        <div class="schedule-grid">
          <div class="schedule-item theory">
            <div class="schedule-icon">ğŸ“š</div>
            <div class="schedule-content">
              <h3>ç†è®ºè®²è§£</h3>
              <p>30åˆ†é’Ÿ</p>
              <span>é…ç½®ç®¡ç† + å­˜å‚¨ + Helm</span>
            </div>
          </div>
          <div class="schedule-item practice">
            <div class="schedule-icon">ğŸ’»</div>
            <div class="schedule-content">
              <h3>ç»¼åˆå®æˆ˜</h3>
              <p>45åˆ†é’Ÿ</p>
              <span>SpringBoot+MySQLéƒ¨ç½²</span>
            </div>
          </div>
          <div class="schedule-item exercise">
            <div class="schedule-icon">âœï¸</div>
            <div class="schedule-content">
              <h3>éšå ‚ç»ƒä¹ </h3>
              <p>15åˆ†é’Ÿ</p>
              <span>Helméƒ¨ç½²Prometheus</span>
            </div>
          </div>
        </div>
      </div>

      <div class="page section-page">
        <div class="section-number">Part 1</div>
        <h2 class="section-title">é…ç½®ç®¡ç†</h2>
        <p class="section-desc">ConfigMapä¸Secret</p>
      </div>

      <div class="page">
        <h2 class="page-title">ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ç®¡ç†ï¼Ÿ</h2>
        <div class="pain-points-grid">
          <div class="pain-point">
            <div class="pain-icon">ğŸ˜°</div>
            <h3>ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹</h3>
            <ul>
              <li>é…ç½®æ–‡ä»¶æ‰“åŒ…åœ¨é•œåƒä¸­</li>
              <li>ä¿®æ”¹é…ç½®éœ€è¦é‡æ–°æ„å»ºé•œåƒ</li>
              <li>æ•æ„Ÿä¿¡æ¯æ˜æ–‡å­˜å‚¨</li>
              <li>ä¸åŒç¯å¢ƒé…ç½®éš¾ä»¥ç®¡ç†</li>
            </ul>
          </div>
          <div class="pain-point solution">
            <div class="pain-icon">ğŸ˜Š</div>
            <h3>K8sé…ç½®ç®¡ç†æ–¹æ¡ˆ</h3>
            <ul>
              <li>ConfigMapï¼šå­˜å‚¨é…ç½®æ–‡ä»¶</li>
              <li>Secretï¼šå­˜å‚¨æ•æ„Ÿä¿¡æ¯</li>
              <li>é…ç½®ä¸é•œåƒè§£è€¦</li>
              <li>æ”¯æŒçƒ­æ›´æ–°ï¼ˆéœ€åº”ç”¨é…åˆï¼‰</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">ConfigMapè¯¦è§£</h2>
        <div class="term-box">
          <div class="term-header">
            <span class="term-icon">ğŸ“–</span>
            <span class="term-name">ConfigMap</span>
          </div>
          <p class="term-def">ConfigMapæ˜¯K8sä¸­ç”¨äºå­˜å‚¨éæ•æ„Ÿé…ç½®æ•°æ®çš„APIå¯¹è±¡ï¼Œå¯ä»¥å°†é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œå‚æ•°ã€ç¯å¢ƒå˜é‡ç­‰ä¸å®¹å™¨é•œåƒè§£è€¦ã€‚</p>
        </div>
        <div class="code-block">
          <div class="code-header">
            <span>configmap.yaml</span>
          </div>
          <pre class="code-content"><code>apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  application.yml: |
    server:
      port: 8080
    database:
      host: mysql-service
      port: 3306
  DEBUG: "false"</code></pre>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">ConfigMapä½¿ç”¨æ–¹å¼</h2>
        <div class="usage-cards">
          <div class="usage-card">
            <div class="usage-num">01</div>
            <h3>ç¯å¢ƒå˜é‡æ³¨å…¥</h3>
            <div class="code-block mini">
              <pre class="code-content"><code>envFrom:
- configMapRef:
    name: app-config</code></pre>
            </div>
          </div>
          <div class="usage-card">
            <div class="usage-num">02</div>
            <h3>æŒ‚è½½ä¸ºæ–‡ä»¶</h3>
            <div class="code-block mini">
              <pre class="code-content"><code>volumes:
- name: config
  configMap:
    name: app-config</code></pre>
            </div>
          </div>
          <div class="usage-card">
            <div class="usage-num">03</div>
            <h3>å‘½ä»¤è¡Œå‚æ•°</h3>
            <div class="code-block mini">
              <pre class="code-content"><code>command: ["./app"]
args: ["--config=/etc/config/app.yml"]</code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">Secretè¯¦è§£</h2>
        <div class="term-box">
          <div class="term-header">
            <span class="term-icon">ğŸ“–</span>
            <span class="term-name">Secret</span>
          </div>
          <p class="term-def">Secretæ˜¯K8sä¸­ç”¨äºå­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ã€ä»¤ç‰Œã€å¯†é’¥ï¼‰çš„APIå¯¹è±¡ï¼Œæ•°æ®é‡‡ç”¨Base64ç¼–ç å­˜å‚¨ã€‚</p>
        </div>
        <div class="code-block">
          <div class="code-header">
            <span>secret.yaml</span>
          </div>
          <pre class="code-content"><code>apiVersion: v1
kind: Secret
metadata:
  name: mysql-secret
type: Opaque
data:
  username: cm9vdA==        # base64ç¼–ç çš„ "root"
  password: cGFzc3dvcmQxMjM=  # base64ç¼–ç çš„ "password123"</code></pre>
        </div>
        <div class="highlight-box warning">
          <h3>âš ï¸ å®‰å…¨æç¤º</h3>
          <ul>
            <li>Base64ä¸æ˜¯åŠ å¯†ï¼Œåªæ˜¯ç¼–ç </li>
            <li>ç”Ÿäº§ç¯å¢ƒå»ºè®®å¯ç”¨KMSåŠ å¯†</li>
            <li>ä½¿ç”¨RBACé™åˆ¶Secretè®¿é—®æƒé™</li>
          </ul>
        </div>
      </div>

      <div class="page section-page">
        <div class="section-number">Part 2</div>
        <h2 class="section-title">æŒä¹…åŒ–å­˜å‚¨</h2>
        <p class="section-desc">Volumeä¸PersistentVolumeClaim</p>
      </div>

      <div class="page">
        <h2 class="page-title">ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–å­˜å‚¨ï¼Ÿ</h2>
        <div class="storage-problem">
          <div class="problem-box">
            <div class="problem-title">å®¹å™¨å­˜å‚¨ç‰¹æ€§</div>
            <div class="problem-flow">
              <div class="flow-item">
                <span class="flow-icon">ğŸ“¦</span>
                <span>å®¹å™¨å†…æ•°æ®</span>
              </div>
              <div class="flow-arrow">â†’</div>
              <div class="flow-item danger">
                <span class="flow-icon">ğŸ’¥</span>
                <span>å®¹å™¨åˆ é™¤åä¸¢å¤±</span>
              </div>
            </div>
          </div>
        </div>
        <div class="highlight-box">
          <h3>K8så­˜å‚¨è§£å†³æ–¹æ¡ˆ</h3>
          <ul>
            <li><strong>Volume</strong>ï¼šPodçº§åˆ«çš„å­˜å‚¨å·</li>
            <li><strong>PV</strong>ï¼šé›†ç¾¤çº§åˆ«çš„æŒä¹…åŒ–å­˜å‚¨èµ„æº</li>
            <li><strong>PVC</strong>ï¼šç”¨æˆ·å¯¹å­˜å‚¨èµ„æºçš„è¯·æ±‚</li>
            <li><strong>StorageClass</strong>ï¼šåŠ¨æ€å­˜å‚¨ä¾›åº”</li>
          </ul>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">PVä¸PVCå…³ç³»</h2>
        <div class="pv-pvc-diagram">
          <div class="pv-layer">
            <div class="pv-box">
              <div class="pv-title">PersistentVolume (PV)</div>
              <div class="pv-desc">å­˜å‚¨èµ„æºæŠ½è±¡</div>
              <div class="pv-types">
                <span>NFS</span>
                <span>Cloud Disk</span>
                <span>Local</span>
              </div>
            </div>
          </div>
          <div class="binding-arrow">â†“ ç»‘å®š</div>
          <div class="pvc-layer">
            <div class="pvc-box">
              <div class="pvc-title">PersistentVolumeClaim (PVC)</div>
              <div class="pvc-desc">å­˜å‚¨èµ„æºè¯·æ±‚</div>
              <div class="pvc-spec">storage: 10Gi</div>
            </div>
          </div>
          <div class="binding-arrow">â†“ æŒ‚è½½</div>
          <div class="pod-layer">
            <div class="pod-box">
              <div class="pod-title">Pod</div>
              <div class="pod-mount">/data</div>
            </div>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">PVCä½¿ç”¨ç¤ºä¾‹</h2>
        <div class="code-block">
          <div class="code-header">
            <span>pvc.yaml</span>
          </div>
          <pre class="code-content"><code>apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: standard</code></pre>
        </div>
        <div class="code-block">
          <div class="code-header">
            <span>åœ¨Podä¸­ä½¿ç”¨PVC</span>
          </div>
          <pre class="code-content"><code>volumes:
- name: mysql-data
  persistentVolumeClaim:
    claimName: mysql-pvc
volumeMounts:
- name: mysql-data
  mountPath: /var/lib/mysql</code></pre>
        </div>
      </div>

      <div class="page section-page">
        <div class="section-number">Part 3</div>
        <h2 class="section-title">HelmåŒ…ç®¡ç†</h2>
        <p class="section-desc">å¿«é€Ÿéƒ¨ç½²å¤æ‚åº”ç”¨</p>
      </div>

      <div class="page">
        <h2 class="page-title">Helmç®€ä»‹</h2>
        <div class="term-box">
          <div class="term-header">
            <span class="term-icon">ğŸ“–</span>
            <span class="term-name">Helm</span>
          </div>
          <p class="term-def">Helmæ˜¯K8sçš„åŒ…ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼äºapt/yumã€‚é€šè¿‡Chartï¼ˆé¢„å®šä¹‰æ¨¡æ¿ï¼‰å®ç°å¤æ‚åº”ç”¨çš„ä¸€é”®éƒ¨ç½²ã€‚</p>
        </div>
        <div class="helm-concepts">
          <div class="concept-card">
            <div class="concept-icon">ğŸ“¦</div>
            <h3>Chart</h3>
            <p>åº”ç”¨åŒ…æ¨¡æ¿ï¼ŒåŒ…å«æ‰€æœ‰K8sèµ„æºå®šä¹‰</p>
          </div>
          <div class="concept-card">
            <div class="concept-icon">ğŸš€</div>
            <h3>Release</h3>
            <p>Chartçš„éƒ¨ç½²å®ä¾‹ï¼Œå¯å¤šæ¬¡å®‰è£…</p>
          </div>
          <div class="concept-card">
            <div class="concept-icon">ğŸ </div>
            <h3>Repository</h3>
            <p>Chartä»“åº“ï¼Œå­˜æ”¾å„ç±»åº”ç”¨æ¨¡æ¿</p>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">Helmå¸¸ç”¨å‘½ä»¤</h2>
        <div class="cmd-table">
          <div class="cmd-row header">
            <div class="cmd-col">å‘½ä»¤</div>
            <div class="cmd-col">è¯´æ˜</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-col"><code>helm repo add</code></div>
            <div class="cmd-col">æ·»åŠ Chartä»“åº“</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-col"><code>helm search repo</code></div>
            <div class="cmd-col">æœç´¢å¯ç”¨çš„Chart</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-col"><code>helm install</code></div>
            <div class="cmd-col">å®‰è£…Chart</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-col"><code>helm upgrade</code></div>
            <div class="cmd-col">å‡çº§Release</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-col"><code>helm rollback</code></div>
            <div class="cmd-col">å›æ»šRelease</div>
          </div>
          <div class="cmd-row">
            <div class="cmd-col"><code>helm uninstall</code></div>
            <div class="cmd-col">å¸è½½Release</div>
          </div>
        </div>
      </div>

      <div class="page section-page">
        <div class="section-number">Part 4</div>
        <h2 class="section-title">æŠ€æœ¯é€‰å‹å¯¹æ¯”</h2>
        <p class="section-desc">å®¹å™¨æŠ€æœ¯ç”Ÿæ€å…¨æ™¯</p>
      </div>

      <div class="page">
        <h2 class="page-title">å®¹å™¨æŠ€æœ¯é€‰å‹å¯¹æ¯”</h2>
        <div class="compare-table">
          <div class="compare-header">
            <div class="compare-cell">æŠ€æœ¯</div>
            <div class="compare-cell">å®šä½</div>
            <div class="compare-cell">é€‚ç”¨åœºæ™¯</div>
            <div class="compare-cell">å¤æ‚åº¦</div>
          </div>
          <div class="compare-row">
            <div class="compare-cell"><strong>Docker</strong></div>
            <div class="compare-cell">å®¹å™¨è¿è¡Œæ—¶</div>
            <div class="compare-cell">å•æœºå¼€å‘æµ‹è¯•</div>
            <div class="compare-cell">â˜…â˜†â˜†â˜†â˜†</div>
          </div>
          <div class="compare-row">
            <div class="compare-cell"><strong>Compose</strong></div>
            <div class="compare-cell">å¤šå®¹å™¨ç¼–æ’</div>
            <div class="compare-cell">å•æœºå¤šæœåŠ¡</div>
            <div class="compare-cell">â˜…â˜…â˜†â˜†â˜†</div>
          </div>
          <div class="compare-row">
            <div class="compare-cell"><strong>Swarm</strong></div>
            <div class="compare-cell">é›†ç¾¤ç¼–æ’</div>
            <div class="compare-cell">ä¸­å°è§„æ¨¡é›†ç¾¤</div>
            <div class="compare-cell">â˜…â˜…â˜…â˜†â˜†</div>
          </div>
          <div class="compare-row">
            <div class="compare-cell"><strong>K8s</strong></div>
            <div class="compare-cell">å®¹å™¨å¹³å°</div>
            <div class="compare-cell">ä¼ä¸šçº§ç”Ÿäº§</div>
            <div class="compare-cell">â˜…â˜…â˜…â˜…â˜†</div>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">å­¦ä¹ è·¯å¾„è§„åˆ’</h2>
        <div class="learning-path">
          <div class="path-stage">
            <div class="stage-num">1</div>
            <div class="stage-content">
              <h3>å…¥é—¨é˜¶æ®µ</h3>
              <p>DockeråŸºç¡€ â†’ é•œåƒæ„å»º â†’ å®¹å™¨ç®¡ç†</p>
            </div>
          </div>
          <div class="path-arrow">â†“</div>
          <div class="path-stage">
            <div class="stage-num">2</div>
            <div class="stage-content">
              <h3>è¿›é˜¶é˜¶æ®µ</h3>
              <p>Dockerç½‘ç»œ â†’ Composeç¼–æ’ â†’ ç§æœ‰ä»“åº“</p>
            </div>
          </div>
          <div class="path-arrow">â†“</div>
          <div class="path-stage">
            <div class="stage-num">3</div>
            <div class="stage-content">
              <h3>K8så…¥é—¨</h3>
              <p>Pod/Deployment â†’ Service â†’ Ingress</p>
            </div>
          </div>
          <div class="path-arrow">â†“</div>
          <div class="path-stage">
            <div class="stage-num">4</div>
            <div class="stage-content">
              <h3>K8sè¿›é˜¶</h3>
              <p>å­˜å‚¨/é…ç½® â†’ Helm â†’ ç›‘æ§å‘Šè­¦</p>
            </div>
          </div>
          <div class="path-arrow">â†“</div>
          <div class="path-stage">
            <div class="stage-num">5</div>
            <div class="stage-content">
              <h3>ç²¾é€šé˜¶æ®µ</h3>
              <p>CKAè®¤è¯ â†’ æºç åˆ†æ â†’ äº‘åŸç”Ÿæ¶æ„</p>
            </div>
          </div>
        </div>
      </div>

      <div class="page section-page">
        <div class="section-number">Part 5</div>
        <h2 class="section-title">ç»¼åˆå®æˆ˜</h2>
        <p class="section-desc">K8séƒ¨ç½²SpringBoot+MySQLå…¨æ ˆåº”ç”¨</p>
      </div>

      <div class="page">
        <h2 class="page-title">å®æˆ˜æ¶æ„</h2>
        <div class="arch-diagram-full">
          <div class="arch-ingress">
            <div class="ingress-box">Ingress</div>
            <div class="ingress-domain">app.example.com</div>
          </div>
          <div class="arch-arrow">â†“</div>
          <div class="arch-services">
            <div class="service-box spring">
              <div class="svc-name">SpringBoot Service</div>
              <div class="svc-pods">
                <span class="pod">Pod1</span>
                <span class="pod">Pod2</span>
              </div>
            </div>
          </div>
          <div class="arch-arrow">â†“</div>
          <div class="arch-services">
            <div class="service-box mysql">
              <div class="svc-name">MySQL Service</div>
              <div class="svc-pods">
                <span class="pod">MySQL Pod</span>
              </div>
            </div>
          </div>
          <div class="arch-arrow">â†“</div>
          <div class="arch-storage">
            <div class="storage-box">PVC â†’ PV â†’ äº‘å­˜å‚¨/NFS</div>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">æ­¥éª¤1ï¼šåˆ›å»ºConfigMapå’ŒSecret</h2>
        <div class="code-block">
          <div class="code-header">
            <span>é…ç½®ä¸å¯†é’¥</span>
          </div>
          <pre class="code-content"><code>kubectl apply -f - &lt;&lt;EOF
apiVersion: v1
kind: ConfigMap
metadata:
  name: springboot-config
data:
  application.yml: |
    server.port: 8080
    spring.datasource.url: jdbc:mysql://mysql-service:3306/appdb
---
apiVersion: v1
kind: Secret
metadata:
  name: mysql-secret
type: Opaque
stringData:
  root-password: "MySecretPass123"
  database: "appdb"
EOF</code></pre>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">æ­¥éª¤2ï¼šéƒ¨ç½²MySQL</h2>
        <div class="code-block">
          <div class="code-header">
            <span>mysql-deployment.yaml</span>
          </div>
          <pre class="code-content"><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: mysql
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mysql
  template:
    metadata:
      labels:
        app: mysql
    spec:
      containers:
      - name: mysql
        image: mysql:8.0
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secret
              key: root-password
        - name: MYSQL_DATABASE
          valueFrom:
            secretKeyRef:
              name: mysql-secret
              key: database
        volumeMounts:
        - name: mysql-data
          mountPath: /var/lib/mysql
      volumes:
      - name: mysql-data
        persistentVolumeClaim:
          claimName: mysql-pvc</code></pre>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">æ­¥éª¤3ï¼šéƒ¨ç½²SpringBootåº”ç”¨</h2>
        <div class="code-block">
          <div class="code-header">
            <span>springboot-deployment.yaml</span>
          </div>
          <pre class="code-content"><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: springboot-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: springboot
  template:
    spec:
      containers:
      - name: springboot
        image: myregistry/springboot-app:v1
        ports:
        - containerPort: 8080
        envFrom:
        - configMapRef:
            name: springboot-config
        env:
        - name: SPRING_DATASOURCE_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secret
              key: root-password</code></pre>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">æ­¥éª¤4ï¼šåˆ›å»ºServiceå’ŒIngress</h2>
        <div class="code-block">
          <div class="code-header">
            <span>service-ingress.yaml</span>
          </div>
          <pre class="code-content"><code>apiVersion: v1
kind: Service
metadata:
  name: springboot-service
spec:
  selector:
    app: springboot
  ports:
  - port: 80
    targetPort: 8080
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: app-ingress
spec:
  rules:
  - host: app.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: springboot-service
            port:
              number: 80</code></pre>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">æ­¥éª¤5ï¼šéªŒè¯éƒ¨ç½²</h2>
        <div class="code-block">
          <div class="code-header">
            <span>éªŒè¯å‘½ä»¤</span>
          </div>
          <pre class="code-content"><code>kubectl get all
NAME                                  READY   STATUS    AGE
pod/mysql-xxx                         1/1     Running   2m
pod/springboot-app-xxx-aaa            1/1     Running   2m
pod/springboot-app-xxx-bbb            1/1     Running   2m

curl http://app.example.com/api/health
{"status":"UP"}

kubectl exec -it mysql-xxx -- mysql -uroot -pMySecretPass123 -e "SHOW DATABASES;"
+--------------------+
| Database           |
+--------------------+
| appdb              |
+--------------------+</code></pre>
        </div>
        <div class="highlight-box success">
          <h3>âœ… éƒ¨ç½²æˆåŠŸ</h3>
          <p>SpringBootåº”ç”¨å·²æˆåŠŸè¿æ¥MySQLï¼Œæ•°æ®æŒä¹…åŒ–åˆ°PVCï¼</p>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">æ•…éšœæ’æŸ¥æ¨¡æ‹Ÿ</h2>
        <div class="troubleshoot-flow">
          <div class="trouble-step">
            <div class="step-title">1. æ•…éšœæ³¨å…¥</div>
            <div class="step-content">ä¿®æ”¹ConfigMapä¸­çš„æ•°æ®åº“è¿æ¥åœ°å€ä¸ºé”™è¯¯å€¼</div>
          </div>
          <div class="trouble-step">
            <div class="step-title">2. è§‚å¯Ÿç°è±¡</div>
            <div class="step-content">åº”ç”¨æ—¥å¿—æ˜¾ç¤ºæ•°æ®åº“è¿æ¥å¤±è´¥</div>
          </div>
          <div class="trouble-step">
            <div class="step-title">3. å®šä½é—®é¢˜</div>
            <div class="step-content">ä½¿ç”¨kubectl logs/describeæŸ¥çœ‹é”™è¯¯ä¿¡æ¯</div>
          </div>
          <div class="trouble-step">
            <div class="step-title">4. ä¿®å¤é—®é¢˜</div>
            <div class="step-content">ä¿®æ­£ConfigMapï¼Œé‡å¯Podæ¢å¤æœåŠ¡</div>
          </div>
        </div>
        <div class="code-block">
          <div class="code-header">
            <span>æ’æŸ¥å‘½ä»¤</span>
          </div>
          <pre class="code-content"><code>kubectl logs springboot-app-xxx-aaa
Error: Could not connect to mysql-service-wrong:3306

kubectl describe pod springboot-app-xxx-aaa
Events: Pulling image, Created container, Started container</code></pre>
        </div>
      </div>

      <div class="page section-page">
        <div class="section-number">Part 6</div>
        <h2 class="section-title">éšå ‚ç»ƒä¹ </h2>
        <p class="section-desc">Helméƒ¨ç½²Prometheusç›‘æ§ç³»ç»Ÿ</p>
      </div>

      <div class="page">
        <h2 class="page-title">ç»ƒä¹ ä»»åŠ¡</h2>
        <div class="exercise-card">
          <div class="exercise-header">
            <span class="exercise-badge">åŠ¨æ‰‹ç»ƒä¹ </span>
            <span class="exercise-time">15åˆ†é’Ÿ</span>
          </div>
          <div class="exercise-content">
            <h3>ä»»åŠ¡è¦æ±‚</h3>
            <ol class="exercise-steps">
              <li>æ·»åŠ Prometheus Helmä»“åº“</li>
              <li>ä½¿ç”¨Helmä¸€é”®éƒ¨ç½²Prometheusç›‘æ§ç³»ç»Ÿ</li>
              <li>æŸ¥çœ‹Prometheusç›‘æ§åˆ°çš„K8sé›†ç¾¤èŠ‚ç‚¹ã€PodæŒ‡æ ‡</li>
              <li>æäº¤Helméƒ¨ç½²å‘½ä»¤å’ŒPrometheusç›‘æ§é¢æ¿æˆªå›¾</li>
            </ol>
          </div>
        </div>
        <div class="hint-box">
          <span class="hint-icon">ğŸ’¡</span>
          <div class="hint-content">
            <h4>æç¤º</h4>
            <p>ä»“åº“ï¼šprometheus-community</p>
            <p>Chartï¼škube-prometheus-stack</p>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">å‚è€ƒç­”æ¡ˆ</h2>
        <div class="code-block">
          <div class="code-header">
            <span>Helméƒ¨ç½²Prometheus</span>
          </div>
          <pre class="code-content"><code>helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update

helm install prometheus prometheus-community/kube-prometheus-stack

kubectl get pods
NAME                                                     READY   STATUS
prometheus-grafana-xxx                                   3/3     Running
prometheus-kube-prometheus-operator-xxx                  1/1     Running
prometheus-kube-state-metrics-xxx                        1/1     Running
prometheus-prometheus-kube-prometheus-prometheus-0       2/2     Running

kubectl port-forward svc/prometheus-grafana 3000:80
# è®¿é—® http://localhost:3000 æŸ¥çœ‹Grafanaç›‘æ§é¢æ¿</code></pre>
        </div>
      </div>

      <div class="page section-page">
        <div class="section-number">Part 7</div>
        <h2 class="section-title">è¯¾ç¨‹æ€»ç»“</h2>
        <p class="section-desc">16è®²çŸ¥è¯†ç‚¹ä¸²è®²</p>
      </div>

      <div class="page">
        <h2 class="page-title">Dockeræ ¸å¿ƒçŸ¥è¯†å›é¡¾</h2>
        <div class="knowledge-grid">
          <div class="knowledge-item">
            <h3>é•œåƒç®¡ç†</h3>
            <ul>
              <li>Dockerfileæ„å»º</li>
              <li>å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–</li>
              <li>ç§æœ‰ä»“åº“ç®¡ç†</li>
            </ul>
          </div>
          <div class="knowledge-item">
            <h3>å®¹å™¨æ“ä½œ</h3>
            <ul>
              <li>ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
              <li>æ•°æ®å·æŒ‚è½½</li>
              <li>èµ„æºé™åˆ¶</li>
            </ul>
          </div>
          <div class="knowledge-item">
            <h3>ç½‘ç»œé€šä¿¡</h3>
            <ul>
              <li>Bridge/Hostæ¨¡å¼</li>
              <li>è‡ªå®šä¹‰ç½‘ç»œ</li>
              <li>å®¹å™¨äº’è”</li>
            </ul>
          </div>
          <div class="knowledge-item">
            <h3>ç¼–æ’å·¥å…·</h3>
            <ul>
              <li>Docker Compose</li>
              <li>å¤šæœåŠ¡ç¼–æ’</li>
              <li>ç¯å¢ƒå˜é‡ç®¡ç†</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">K8sæ ¸å¿ƒçŸ¥è¯†å›é¡¾</h2>
        <div class="knowledge-grid">
          <div class="knowledge-item">
            <h3>å·¥ä½œè´Ÿè½½</h3>
            <ul>
              <li>Podæœ€å°è°ƒåº¦å•ä½</li>
              <li>Deploymentå‰¯æœ¬ç®¡ç†</li>
              <li>æ»šåŠ¨æ›´æ–°/å›æ»š</li>
            </ul>
          </div>
          <div class="knowledge-item">
            <h3>æœåŠ¡å‘ç°</h3>
            <ul>
              <li>Serviceå››ç§ç±»å‹</li>
              <li>Ingressä¸ƒå±‚è·¯ç”±</li>
              <li>DNSæœåŠ¡å‘ç°</li>
            </ul>
          </div>
          <div class="knowledge-item">
            <h3>é…ç½®å­˜å‚¨</h3>
            <ul>
              <li>ConfigMapé…ç½®</li>
              <li>Secretå¯†é’¥</li>
              <li>PV/PVCå­˜å‚¨</li>
            </ul>
          </div>
          <div class="knowledge-item">
            <h3>ç”Ÿæ€å·¥å…·</h3>
            <ul>
              <li>HelmåŒ…ç®¡ç†</li>
              <li>ç›‘æ§å‘Šè­¦</li>
              <li>CI/CDé›†æˆ</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">çŸ¥è¯†ä½“ç³»å…¨æ™¯å›¾</h2>
        <div class="full-map">
          <div class="map-section docker">
            <div class="section-title">Docker</div>
            <div class="section-items">
              <span>é•œåƒ</span>
              <span>å®¹å™¨</span>
              <span>ç½‘ç»œ</span>
              <span>å­˜å‚¨</span>
              <span>Dockerfile</span>
              <span>Compose</span>
            </div>
          </div>
          <div class="map-arrow">â†’</div>
          <div class="map-section k8s">
            <div class="section-title">Kubernetes</div>
            <div class="section-items">
              <span>Pod</span>
              <span>Deployment</span>
              <span>Service</span>
              <span>Ingress</span>
              <span>ConfigMap</span>
              <span>PV/PVC</span>
            </div>
          </div>
          <div class="map-arrow">â†’</div>
          <div class="map-section cloud">
            <div class="section-title">äº‘åŸç”Ÿ</div>
            <div class="section-items">
              <span>å¾®æœåŠ¡</span>
              <span>DevOps</span>
              <span>æœåŠ¡ç½‘æ ¼</span>
              <span>Serverless</span>
            </div>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">åç»­å­¦ä¹ å»ºè®®</h2>
        <div class="suggestions">
          <div class="suggestion-item">
            <div class="suggestion-icon">ğŸ†</div>
            <div class="suggestion-content">
              <h3>è€ƒå–è®¤è¯</h3>
              <p>CKA (Certified Kubernetes Administrator)</p>
              <p>CKAD (Certified Kubernetes Application Developer)</p>
            </div>
          </div>
          <div class="suggestion-item">
            <div class="suggestion-icon">ğŸ“–</div>
            <div class="suggestion-content">
              <h3>æ·±å…¥å­¦ä¹ </h3>
              <p>K8sæºç åˆ†æã€è‡ªå®šä¹‰æ§åˆ¶å™¨å¼€å‘</p>
              <p>æœåŠ¡ç½‘æ ¼ï¼ˆIstioï¼‰ã€Serverlessï¼ˆKnativeï¼‰</p>
            </div>
          </div>
          <div class="suggestion-item">
            <div class="suggestion-icon">ğŸ’¼</div>
            <div class="suggestion-content">
              <h3>å®è·µé¡¹ç›®</h3>
              <p>æ­å»ºå®Œæ•´çš„CI/CDæµæ°´çº¿</p>
              <p>éƒ¨ç½²çœŸå®çš„å¾®æœåŠ¡æ¶æ„åº”ç”¨</p>
            </div>
          </div>
        </div>
      </div>

      <div class="page">
        <h2 class="page-title">è¯¾ç¨‹å®Œç»“</h2>
        <div class="final-message">
          <div class="congrats">ğŸ‰ æ­å–œå®Œæˆå…¨éƒ¨è¯¾ç¨‹ï¼</div>
          <div class="summary-text">
            <p>ä»DockeråŸºç¡€åˆ°K8så®æˆ˜ï¼Œæ‚¨å·²ç»æŒæ¡äº†å®¹å™¨æŠ€æœ¯çš„æ ¸å¿ƒçŸ¥è¯†ã€‚</p>
            <p>æŠ€æœ¯çš„å­¦ä¹ æ°¸æ— æ­¢å¢ƒï¼Œå¸Œæœ›æ‚¨ç»§ç»­ä¿æŒå­¦ä¹ çš„çƒ­æƒ…ï¼</p>
          </div>
          <div class="contact-info">
            <p>å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿äº¤æµè®¨è®ºï¼</p>
          </div>
        </div>
        <div class="page-number">ç¬¬16è®² / å…±26é¡µ</div>
      </div>

    </div>

    <div class="page-navigation">
      <button class="nav-btn prev" id="prevBtn">ä¸Šä¸€é¡µ</button>
      <div class="page-indicator">
        <span class="current" id="currentPage">1</span>
        <span class="separator">/</span>
        <span class="total" id="totalPages">26</span>
      </div>
      <button class="nav-btn next" id="nextBtn">ä¸‹ä¸€é¡µ</button>
    </div>

  </div>

  <script src="../lecture-assets/js/lecture-template.js"></script>
</body>
</html>
